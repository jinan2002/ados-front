<!DOCTYPE html>
<html>
<head>
  <title>Predict from Movement Data</title>
</head>
<body>
  <h2>ADOS Prediction</h2>
  
  <label for="sequenceInput">Enter sequence (one row per line, comma-separated):</label><br>
  <textarea id="sequenceInput" rows="10" cols="50">
0.5,0.7,0.3
0.6,0.8,0.4
0.7,0.9,0.2
  </textarea><br><br>

  <button onclick="sendPrediction()">Predict</button>

  <h3>Result:</h3>
  <pre id="result"></pre>

  <script>
    function sendPrediction() {
      const rawInput = document.getElementById('sequenceInput').value.trim();

      if (!rawInput) {
        document.getElementById('result').textContent = 'Please enter sequence data first.';
        return;
      }

      const sequence = rawInput.split('\n').map(row =>
        row.split(',').map(val => parseFloat(val))
      );

      console.log('Sending sequence:', sequence);  // Debug print in console

      fetch('https://ados-api.onrender.com/predict', {

        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ sequence: sequence })
      })
      .then(async response => {
        if (!response.ok) {
          const err = await response.text();
          throw new Error(err || 'Unknown error');
        }
        return response.json();
      })
      .then(data => {
        document.getElementById('result').textContent = JSON.stringify(data, null, 2);
      })
      .catch(error => {
        console.error('Error from API:', error);
        document.getElementById('result').textContent = '‚ùå Error:\n' + error;
      });
    }
  </script>
</body>
</html>
